<style>
.accordion {
    border: none;
}
.section {
  /* background-color: #eee; */
  color: #444;
  cursor: pointer;
  padding: 18px;
  width: 100%;
  border: none;
  text-align: left;
  outline: none;
  font-size: 12px;
  transition: 0.4s;
}

.active, .section:hover, .section:hover:after {
  color:var(--accent-primary);
}

.section:after {
  content: '\002B';
  color: #777;
  font-weight: bold;
  float: right;
  margin-left: 5px;
}

.section.active:after {
  content: "\2212";
}

.panel {
  padding: 0 18px;
  /* background-color: white; */
  max-height: 0;
  overflow: hidden;
  transition: max-height 0.2s ease-out;
}
.chevron {
    transition:all .25s ease-in-out;
}

.section.active .chevron {
    transform:rotate(180);
}
</style>
<div class="sidebarBlock" id="sideAllCategories">
    <h5 class="sidebarBlock-heading">Categories</h5>
    {{#if categories}}
    <div class="accordion">
        {{#each categories}}
            {{#if children}}
            <div class="section navPages-action" style="padding-left:0;">{{name}}
            <!-- <div style="" class="position-relative"> -->
                <!-- <div style="width:12px;height:12px;top:18px;right:18px;pointer-events:none;" class="position-absolute chevron">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M233.4 406.6c12.5 12.5 32.8 12.5 45.3 0l192-192c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L256 338.7 86.6 169.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l192 192z"/></svg>
                </div> -->
            <!-- </div> -->
            </div>
            <div class="panel">
            <a class="navPages-action has-subMenu" href="{{url}}"><small>View All {{name}}</small></a>
            <hr style="margin: 0;">
            {{#each children}}
            <a class="navPages-action has-subMenu" href="{{url}}"><small>{{name}}</small></a>
            <hr style="margin: 0;">
            {{/each}}
            </div>
            {{else}}
            <a class="navPages-action" href="{{url}}" style="padding-left: 0;">{{name}}</a>
            {{/if}}
            <hr style="margin: 0;">
        {{/each}}
    </div>
    {{/if}}
</div>

<div class="sidebar-nav-mobile">
    {{#if category.subcategories}}
            <a href="#subcategoryList" role="button" class="{{#if category.faceted_search_enabled}}facetedSearch-toggle{{/if}} toggleLink toggleSidebarBlock button" data-collapsible>
                <span class="facetedSearch-toggle-indicator">
                    <span class="toggleLink-text toggleLink-text--on">
                        <i class="icon" aria-hidden="true">
                            <svg><use xlink:href="#icon-close"></use></svg>
                        </i>
                        <span>Close to View Results</span>
                    </span>
                    <span class="toggleLink-text toggleLink-text--off">
                        <span>
                            <i class="icon" aria-hidden="true">
                                <svg><use xlink:href="#icon-sort"></use></svg>
                            </i>
                            Subcategories
                        </span>
                    </span>
                </span>
            </a>
    {{/if}}
    {{#if template '!==' 'pages/custom/category/category-nofilters'}}
        {{#or category.faceted_search_enabled theme_settings.shop_by_price_visibility}}
            {{#or category.faceted_search_enabled shop_by_price}}
                <a href="#facetedSearch-navList" role="button" class="facetedSearch-toggle toggleLink button" data-collapsible="" aria-controls="facetedSearch-navList" aria-expanded="true">
                    <span class="facetedSearch-toggle-indicator">
                        <span class="toggleLink-text toggleLink-text--on">
                            <i class="icon" aria-hidden="true">
                                <svg><use xlink:href="#icon-close"></use></svg>
                            </i>
                            Close to View Results
                        </span>

                        <span class="toggleLink-text toggleLink-text--off">
                            <i class="icon" aria-hidden="true">
                                <svg><use xlink:href="#icon-filter"></use></svg>
                            </i>
                            <span>Filter</span>
                        </span>
                    </span>
                </a>
            {{/or}}
        {{/or}}
    {{/if}}
    {{#and theme_settings.shop_by_price_visibility shop_by_price}}
        <a href="#facetedSearch-byPrice" role="button" class="facetedSearch-toggle toggleLink toggleSidebarBlock button" data-collapsible="" aria-controls="facetedSearch-byPrice" aria-expanded="true">
            <span class="facetedSearch-toggle-indicator">
                <span class="toggleLink-text toggleLink-text--on">
                    <i class="icon" aria-hidden="true">
                        <svg><use xlink:href="#icon-close"></use></svg>
                    </i>
                    Close to View Results
                </span>

                <span class="toggleLink-text toggleLink-text--off">
                    <i class="icon" aria-hidden="true">
                        <svg><use xlink:href="#icon-filter"></use></svg>
                    </i>
                    <span>Shop By Price</span>
                </span>
            </span>
        </a>
    {{/and}}
</div>

<nav class="{{#if category.faceted_search_enabled}}facetedSearch-enabled{{/if}}">
    {{#all category.subcategories theme_settings.subcategories_left_column}}
        <div class="facetedSearch sidebarBlock">
            <div id="subcategoryList" class="facetedSearch-navList blocker-container">
                <div class="accordion accordion--navList">
                    <h5 class="sidebarBlock-heading">{{category.name}}</h5>
                    <ul class="navList">
                        {{#each category.subcategories}}
                        <li class="navList-item">
                            <a class="navList-action" href="{{url}}" alt="{{name}}" title="{{name}}">{{name}}</a>
                        </li>
                        {{/each}}
                    </ul>
                </div>
                <div class="blocker" style="display: none;"></div>
            </div>
        </div>
    {{/all}}
    {{#if template '!==' 'pages/custom/category/category-nofilters'}}
        {{#if category.faceted_search_enabled}}
            {{> components/faceted-search/index category}}
        {{/if}}
    {{/if}}
    {{#unless category.faceted_search_enabled}}
        {{#all theme_settings.shop_by_price_visibility category.shop_by_price}}
            <div class="facetedSearch sidebarBlock">
                <div id="facetedSearch-byPrice" class="facetedSearch-navList blocker-container">
                    <div class="accordion accordion--navList">
                        {{> components/category/shop-by-price shop_by_price=category.shop_by_price category_url=category.url}}
                    </div>
                </div>
            </div>
        {{/all}}
    {{/unless}}
</nav>

<a href="/new-items/" title="Image link that goes the new items category">
    <img src="https://cdn11.bigcommerce.com/s-5wp9ky1nrj/product_images/uploaded_images/bd-banner1.jpg" witdh="100%" heigth="auto" alt="" />
</a>
<div style="height:50px;"></div>
<a href="/dab-straws/" title="Image link that goes the new items category">
    <img src="https://cdn11.bigcommerce.com/s-5wp9ky1nrj/product_images/uploaded_images/bd-banner2.jpg" witdh="100%" heigth="auto" alt="" />
</a>

<script>
    // Set up the click event on the accordion itself
// When a panel is clicked, that event will bubble up
// to the accordion and can be handled there.
document.querySelector(".accordion").addEventListener("click", function(event){

// Check to see if the clicked panel was the currently open one.
let alreadyActive = event.target.classList.contains("active");

// Loop over all the panels an close each one
document.querySelectorAll(".panel").forEach(function(panel){
  panel.style.maxHeight = "0";
  panel.previousElementSibling.classList.remove("active");
});

// If the clicked panel wasn't the already active one go ahead
// and open the clicked panel. Otherwise, do nothing and leave
// all the panels closed.
if(!alreadyActive){
  // Then show the clicked panel which is accessible as event.target
  event.target.classList.add("active");
  var panel = event.target.nextElementSibling;
  panel.style.maxHeight = panel.scrollHeight + "px";
}

});
</script>